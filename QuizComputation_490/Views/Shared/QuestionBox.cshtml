@model QuizComputation_490_Model.CustomModels.CompactQuestionModel

<script>

    $(document).ready(function () {
        let question = @Model.QuestionID;
        let option = UserAnswer[question];
        let element = $(`[option = ${option}]`)
        $(element).removeClass("bg-secondary-subtle");
        $(element).addClass("btn-secondary")
    });

    $('.answer-box').on('click', function () {
        let ans = $(this).attr('option');
        let question = $(this).attr('question');
        RegisterAnswer(question, ans, this);
    });
    $('#Submit-Quiz').on('click', function () {
        debugger
        let question = @Model.LastQuestionID;
        if (UserAnswer[question] != null)
            SubmitQuiz(@Model.QuizID);
    })

    $('.previous-button').on('click', function () {
        GetQuestion(@(Model.QuestionID - 1))
    });

    $('.next-button').on('click', function () {
        debugger
        let question = @Model.QuestionID;
        if (UserAnswer[question] != null)
            GetQuestion(@(Model.QuestionID + 1))
    });


</script>

<div>
    <p>Question @(Model.QuestionID - Model.FirstQuestionID + 1) </p>
    <p class="fs-3">@Model.QuestionText</p>
    <div class="d-flex flex-column gap-3 mb-4 answer-holder">
        @{ 
            for(int i = 0 ; i < 4; i++)
            {
                <button class="btn bg-secondary-subtle fs-4 text-start answer-box" question="@Model.QuestionID" option="@(i+1)">(@((char)('A'+i))) @Model.OptionList[i]</button>
            }
        }
    </div>
    <div class="gap-2 d-flex justify-content-end">
        @{ 
            if(Model.FirstQuestionID != Model.QuestionID)
            {
                <button class="btn btn-sm btn-secondary previous-button">&lt;</button>
            }
            if(Model.LastQuestionID != Model.QuestionID)
            {
                <button class="btn btn-sm btn-secondary next-button">&gt;</button>
            }
        }
    </div>
    <div class="d-flex justify-content-center">
        @{ 
            if(Model.LastQuestionID == Model.QuestionID)
            {
                <button class="btn btn-success" id="Submit-Quiz">Submit</button>
            }
        }
    </div>
</div>
